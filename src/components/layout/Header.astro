---
import { getCategories } from '../../lib/api';

let categories = await getCategories() ?? [
  { name: "Barranquilla", slug: "barranquilla" },
  { name: "Atlántico", slug: "atlantico" },
  { name: "Judiciales", slug: "judiciales" },
  { name: "Deportes", slug: "deportes" },
  { name: "Cultura", slug: "cultura" },
  { name: "Economía", slug: "economia" },
  { name: "Opinión", slug: "opinion" },
];

const socials = [
  { href: import.meta.env.PUBLIC_SOCIAL_FACEBOOK || '', label: 'Facebook', icon: 'facebook' },
  { href: import.meta.env.PUBLIC_SOCIAL_INSTAGRAM || '', label: 'Instagram', icon: 'instagram' },
  { href: import.meta.env.PUBLIC_SOCIAL_YOUTUBE || '', label: 'YouTube', icon: 'youtube' },
].filter((s) => !!s.href);
---

<header class="w-full bg-white shadow-md sticky top-0 z-50 border-t-4 border-ctv-primary">
  <div class="container mx-auto px-4 py-4">
    <div class="flex flex-col md:flex-row justify-between items-center gap-4 md:gap-6">
      <a href="/" class="flex items-center" aria-label="CTV Barranquilla inicio">
        <span class="logo-ctv" aria-hidden="true"></span>
        <span class="sr-only">CTV Barranquilla</span>
      </a>
      <div class="flex items-center gap-3">
        {socials.map((s) => (
          <a href={s.href} target="_blank" rel="noopener noreferrer" aria-label={s.label}
            class="w-9 h-9 rounded-full border border-gray-200 flex items-center justify-center text-ctv-primary hover:text-ctv-accent hover:border-ctv-accent transition">
            {s.icon === 'facebook' && (
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor">
                <path d="M13.5 21v-7h2.4l.3-2.7h-2.7V9.1c0-.8.2-1.4 1.4-1.4H16V5.2c-.3 0-1.2-.1-2.2-.1-2.2 0-3.6 1.3-3.6 3.7v2h-2.4V14h2.4v7h3.3Z" />
              </svg>
            )}
            {s.icon === 'instagram' && (
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor">
                <path d="M7.5 3h9A4.5 4.5 0 0 1 21 7.5v9A4.5 4.5 0 0 1 16.5 21h-9A4.5 4.5 0 0 1 3 16.5v-9A4.5 4.5 0 0 1 7.5 3Zm0 2A2.5 2.5 0 0 0 5 7.5v9A2.5 2.5 0 0 0 7.5 19h9A2.5 2.5 0 0 0 19 16.5v-9A2.5 2.5 0 0 0 16.5 5h-9Zm9.75.75a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5ZM12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8Zm0 2a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z" />
              </svg>
            )}
            {s.icon === 'youtube' && (
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor">
                <path d="M21.6 7.2s-.2-1.4-.8-2c-.8-.8-1.6-.8-2-0.9C16.6 4 12 4 12 4h0s-4.6 0-6.8.3c-.4 0-1.3.1-2 .9-.6.6-.8 2-.8 2S2 8.8 2 10.5v1c0 1.7.2 3.3.2 3.3s.2 1.4.8 2c.8.8 1.8.8 2.2.9 1.6.1 6.8.3 6.8.3s4.6 0 6.8-.3c.4-.1 1.2-.1 2-.9.6-.6.8-2 .8-2s.2-1.6.2-3.3v-1c0-1.7-.2-3.3-.2-3.3ZM10 15V8.9l5.3 3.1L10 15Z"/>
              </svg>
            )}
          </a>
        ))}
      </div>
    </div>
  </div>

  <nav class="bg-ctv-primary/5 border-y border-gray-200">
    <div class="container mx-auto px-4">
      <ul class="flex overflow-x-auto gap-6 text-sm font-bold text-ctv-primary py-3 whitespace-nowrap scrollbar-hide">
        <li><a href="/" class="hover:text-ctv-accent uppercase transition">Inicio</a></li>
        {categories.map((cat: any) => (
          <li>
            <a href={`/category/${cat.slug}`} class="hover:text-ctv-accent uppercase transition">
              {cat.name}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </nav>
</header>
