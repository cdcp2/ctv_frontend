---
export interface Props {
  client: string;
  slot: string;
  slotType: 'home_top' | 'sidebar' | 'article_mid' | 'article_end';
  showLabel?: boolean;
}

const { client, slot, slotType, showLabel = true } = Astro.props;
---

<div class={`ad-shell ad-${slotType}`}>
  {showLabel && <span class="ad-label">Publicidad</span>}
  <ins
    class="adsbygoogle ad-frame"
    style="display:block"
    data-ad-client={client}
    data-ad-slot={slot}
    data-ad-format="auto"
    data-full-width-responsive="true"
  ></ins>
</div>

<script is:inline>
  const requestAd = () => {
    try {
      (window.adsbygoogle = window.adsbygoogle || []).push({});
    } catch (e) {}
  };
  if (window.adsbygoogle) {
    requestAd();
  } else {
    document.addEventListener('adsbygoogleLoaded', requestAd, { once: true });
  }
</script>
